use pie/std;

def void main() {
    let map routes = std::map::new();

    let map html_headers = std::map::new();
    std::map::set(html_headers, "Content-Type", "text/html; charset=utf-8");

    let map home = std::map::new();
    std::map::set(home, "status", 200);
    std::map::set(home, "headers", html_headers);
    std::map::set(home, "body",
        "<!doctype html><html><head><title>PIE</title></head><body><h1>Hello</h1><p>Served by PIE.</p></body></html>"
    );

    std::map::set(routes, "GET /", home);
    std::http::serve_routes(8080, routes);
}